{% extends "base.html" %}
{% load widget_tweaks %}

{% block styles %}
<style>
  body {
    background-color: #f8fafc;
  }

  .main-container {
    max-width: 900px;
    margin: 40px auto;
  }

  .search-section {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  }

  .search-section h2 {
    font-weight: 700;
    color: #0d6efd;
  }

  .card-header {
    background-color: #0d6efd;
    color: white;
    font-size: 1.2rem;
    font-weight: 600;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }

  .card {
    border-radius: 12px;
    overflow: hidden;
  }

  .form-check {
    background: #f8f9fa;
    padding: 10px 15px;
    border-radius: 8px;
    margin-bottom: 8px;
    transition: all 0.2s ease-in-out;
  }

  .form-check:hover {
    background: #e9ecef;
  }

  .btn-primary {
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    letter-spacing: 0.5px;
  }

  .alert-danger {
    border-radius: 10px;
    font-weight: 600;
  }
</style>
{% endblock %}

{% block content %}
<div class="main-container">

  <!-- Formulaire de recherche -->
  <section class="search-section mb-4">
    <h2 class="text-center mb-3">
      <i class="fas fa-search"></i> Demande de relev√© de notes
    </h2>
    <form method="post" class="mx-auto" style="max-width:500px;">
      {% csrf_token %}
      {% for field in form %}
        <div class="mb-3">
          <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
          {{ field|add_class:"form-control" }}
          <div class="text-danger small">{{ field.errors }}</div>
        </div>
      {% endfor %}
      <button type="submit" class="btn btn-primary w-100 py-2">
        üîç Rechercher
      </button>
    </form>
  </section>

  {% if releve %}
  <div class="card shadow mb-4">
    <div class="card-header text-center">
      Donn√©es sur le candidat
    </div>
    <div class="card-body">
      <p class="mb-4 text-center">
        <strong>{{ releve.nom }} {{ releve.prenom }}</strong><br>
        N√©(e) le <strong>{{ releve.date_naissance|date:"d/m/Y" }}</strong><br>
        A particip√© aux examens du bac {{ releve.annee }}<br>
        R√©sultat : <strong>{{ releve.total }}/{{ releve.max_total }}</strong><br>
        Mention : <span class="badge bg-success">{{ releve.mention }}</span>
      </p>

      <hr>

      <form method="post">
        {% csrf_token %}
        <p class="mb-2 fw-bold">Je veux imprimer :</p>

        {% for option, label in options %}
        <div class="form-check">
          <input class="form-check-input" type="radio" name="option" id="opt{{ forloop.counter }}" value="{{ option }}" {% if forloop.first %}checked{% endif %}>
          <label class="form-check-label" for="opt{{ forloop.counter }}">
            {{ label }}
          </label>
        </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary mt-3 w-100">
          CONTINUER
        </button>
      </form>
    </div>
  </div>
  {% elif erreur %}
    <div class="alert alert-danger text-center">
      <i class="fas fa-exclamation-circle"></i> {{ erreur }}
    </div>
  {% endif %}

</div>
{% endblock %}
